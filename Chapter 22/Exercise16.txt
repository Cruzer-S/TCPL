Answer:
sscanf(str, (str[0] == '#') ? 
			"%*[#]%[0123456789]" : "%*[^#]%*[#]%[0123456789]\n", 
			sales_rank);
